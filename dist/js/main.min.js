const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),headerAccount=document.querySelector(".header-account"),aside=document.querySelector(".aside"),header=document.querySelector(".header");function Popup(e){let t=document.querySelector("body"),s=document.querySelector("html"),a="object"==typeof e&&!!e.saveID,o=!0,i=!0;const c=function(){let e=window.location.toString();if(e.indexOf("#")>0){let t=e.substring(0,e.indexOf("#"));window.history.replaceState({},document.title,t)}},r=function(e,i){if(o){o=!1;let r=document.querySelector(e);if(!r)return new Error(`Not found "${e}"`);r.classList.contains("popup")&&(r.style.display="flex",t.classList.remove("_popup-active"),s.style.setProperty("--popup-padding",window.innerWidth-t.offsetWidth+"px"),t.classList.add("_popup-active"),c(),a&&history.pushState("","",e),setTimeout(()=>{if(i)r.classList.add("_transition-none"),r.classList.add("_active"),o=!0;else{r.classList.add("_active"),r.addEventListener("transitionend",(function e(){o=!0,r.removeEventListener("transitionend",e)}))}},0))}},n=function(e){if(i){let o;i=!1,o="string"==typeof e?document.querySelector(e):e.closest(".popup"),o.classList.contains("_transition-none")&&o.classList.remove("_transition-none"),setTimeout(()=>{o.classList.remove("_active"),o.addEventListener("transitionend",(function e(){const r=document.querySelectorAll(".popup._active");r.length<1&&(t.classList.remove("_popup-active"),s.style.setProperty("--popup-padding","0px")),a&&(c(),r[r.length-1]&&history.pushState("","","#"+r[r.length-1].getAttribute("id"))),i=!0,o.style.display="none",o.removeEventListener("transitionend",e)}))},0)}};return{open:function(e){r(e)},close:function(e){n(e)},init:function(){let e;if(t.addEventListener("click",(function(t){e=t.target;let s=e.closest(".open-popup");s&&(t.preventDefault(),r(s.getAttribute("href")));let a=e.closest(".popup-close");a&&n(a)})),t.addEventListener("keyup",(function(e){27==e.code&&document.querySelector(".popup._active")&&n(document.querySelector(".popup._active"))})),a){let e=new URL(window.location);e.hash&&r(e.hash,!0)}}}}const popup=new Popup({saveID:!0});popup.init();const getDeviceType=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};function getCoords(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset,left:t.left+window.pageXOffset}}const imageAspectRatio=document.querySelectorAll(".image-aspect-ratio, figure");imageAspectRatio.forEach(e=>{const t=e.querySelector("img"),s=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==s.position&&e.style.setProperty("--padding-aspect-ratio",Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")});const accountChatMain=document.querySelector(".account-chat__main"),accountChatAside=document.querySelector(".account-chat__aside");function scrollHorizontally(e,t){let s=null,a=e.scrollLeft,o=t;requestAnimationFrame((function t(i){s||(s=i);let c=(i-s)/400,r=c<.5?4*c*c*c:(c-1)*(2*c-2)*(2*c-2)+1;e.scrollLeft=a+(o-a)*r,c<1&&requestAnimationFrame(t)}))}body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}t(".header__burger")&&menu.forEach(e=>{e.classList.toggle("_mob-menu-active")});const s=t(".header__lang--target");s&&"desktop"!=getDeviceType()?s.classList.toggle("is-active"):!t(".header__lang")&&document.querySelector(".header__lang--target.is-active")&&document.querySelector(".header__lang--target.is-active").classList.remove("is-active");const a=t(".header-account__lang--target");a&&"desktop"!=getDeviceType()?a.classList.toggle("is-active"):!t(".header-account__lang")&&document.querySelector(".header-account__lang--target.is-active")&&document.querySelector(".header-account__lang--target.is-active").classList.remove("is-active");const o=t(".header__tel--target");o&&"desktop"!=getDeviceType()?o.classList.toggle("is-active"):!t(".header__tel")&&document.querySelector(".header__tel--target.is-active")&&document.querySelector(".header__tel--target.is-active").classList.remove("is-active");const i=t(".header__nav--list a");i&&-1!=i.getAttribute("href").indexOf("#")&&document.querySelector("#"+i.getAttribute("href").split("#").pop())&&(e.preventDefault(),document.querySelector("#"+i.getAttribute("href").split("#").pop()).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),history.pushState("","","#"+i.getAttribute("href").split("#").pop()));const c=t(".reviews__video--preview");c&&(c.classList.add("_play"),c.parentElement.querySelector("video").play());const r=t(".faq__target");r&&(r.closest(".faq__list").querySelector(".faq__target._active")&&(r.classList.contains("_active")||r.closest(".faq__list").querySelector(".faq__target._active").classList.remove("_active")),r.classList.toggle("_active"));let n=t(".scroll-to");if(n){let t;e.preventDefault(),t=document.querySelector(n.getAttribute("href")),menu.forEach(e=>{e.classList.remove("_mob-menu-active")}),t?t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):body.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}const l=t(".header-account__notification--target");l?l.classList.add("is-active"):!t(".header-account__notification")&&document.querySelector(".header-account__notification--target.is-active")&&document.querySelector(".header-account__notification--target.is-active").classList.remove("is-active");const d=t(".header-account__profile--target");d?d.classList.add("is-active"):!t(".header-account__profile")&&document.querySelector(".header-account__profile--target.is-active")&&document.querySelector(".header-account__profile--target.is-active").classList.remove("is-active");t(".header-account__open-aside--btn")&&aside.classList.add("is-active");t(".aside__close")&&aside.classList.remove("is-active");const u=t(".account-block__accordion-target");u&&u.classList.toggle("is-active");const p=t(".account-chat__aside-item");if(p&&accountChatMain){e.preventDefault();const t=p.closest("ul").querySelector(".is-active");t&&t.classList.remove("is-active"),p.classList.add("is-active"),windowSize>=1300?(accountChatMain.classList.remove("fade-in"),accountChatMain.classList.add("fade-out"),setTimeout(()=>{accountChatMain.classList.remove("fade-out"),accountChatMain.classList.add("fade-in")},500)):(accountChatAside.classList.add("is-loading"),setTimeout(()=>{accountChatAside.classList.add("fade-out"),setTimeout(()=>{accountChatAside.style.display="none",accountChatAside.classList.remove("fade-out")},300),accountChatMain.classList.remove("fade-out"),accountChatMain.classList.add("fade-in"),accountChatAside.classList.remove("is-loading"),window.scrollTo({left:0,top:getCoords(accountChatMain).top-30,behavior:"smooth"})},300))}if(t(".account-chat__forward")&&accountChatMain){e.preventDefault();const t=document.querySelector(".account-chat__aside-item.is-active");t&&t.classList.remove("is-active"),accountChatMain.classList.add("fade-out"),accountChatMain.classList.remove("fade-in"),setTimeout(()=>{accountChatAside.style.removeProperty("display"),accountChatAside.classList.add("fade-in")},300)}const g=t(".account-table-controls__arrow");if(g&&!g.classList.contains("is-active")){g.classList.add("is-active");const e=g.closest(".account-table-wrapper"),t=e.querySelector(".account-table-container"),s=e.querySelector("tbody tr").querySelectorAll("td");let a=!1,o=!1;g.classList.contains("is-next")?s.forEach((s,o)=>{getCoords(s).left-getCoords(e).left-1>1&&!a&&(a=!0,t.classList.add("disable-snap"),setTimeout(()=>{scrollHorizontally(t,getCoords(s).left-getCoords(e).left+t.scrollLeft)},0),setTimeout(()=>{t.classList.remove("disable-snap")},400))}):g.classList.contains("is-prev")&&Array.from(s).reverse().forEach((s,a)=>{getCoords(s).left-getCoords(e).left-2<=-10&&!o&&(o=!0,t.classList.add("disable-snap"),setTimeout(()=>{scrollHorizontally(t,getCoords(s).left-getCoords(e).left+t.scrollLeft)},0),setTimeout(()=>{t.classList.remove("disable-snap")},400))}),setTimeout(()=>{g.classList.remove("is-active")},400)}const m=t(".account-chat__group-members--link");if(m){const e=m.closest(".account-chat__group-members").querySelector(".account-chat__group-popup");console.log(m.closest(".account-chat__group-members").querySelector(".account-chat__group-popup")),e&&(e.classList.remove("fade-out"),e.classList.add("is-active"),e.classList.add("fade-in"))}const _=t(".account-chat__group-popup--close");if(_){const e=_.closest(".account-chat__group-popup");e.classList.remove("fade-in"),e.classList.add("fade-out"),setTimeout(()=>{e.classList.remove("is-active")},300)}else t(".account-chat__group-popup")||m||document.querySelectorAll(".account-chat__group-popup").forEach(e=>{e.classList.remove("fade-in"),e.classList.add("fade-out"),setTimeout(()=>{e.classList.remove("is-active")},300)});t(".account-table__tip--content")||t(".account-table__tip--icon")||(document.querySelectorAll(".account-table__tip--content.is-active").forEach(e=>{e.classList.remove("is-visible"),setTimeout(()=>{e.classList.remove("is-active")},300)}),document.querySelectorAll(".account-table__tip--icon.is-active").forEach(e=>{e.classList.remove("is-active")}));const v=t(".student-audio-listening__target");v&&v.classList.toggle("is-active");const h=t(".teacher-rating__groups--arrow");if(h&&!h.classList.contains("is-active")){h.classList.add("is-active");const e=document.querySelectorAll(".teacher-rating__groups--item"),t=h.closest(".teacher-rating__groups").querySelector(".teacher-rating__groups--track"),s=t.querySelector(".simplebar-content-wrapper");let a=!0,o=!0;h.classList.contains("is-next")?e.forEach((e,o)=>{getCoords(e).left-getCoords(s).left>=1&&a&&(t.classList.add("disable-snap"),a=!1,setTimeout(()=>{scrollHorizontally(s,getCoords(e).left-getCoords(t).left+s.scrollLeft),setTimeout(()=>{t.classList.remove("disable-snap"),h.classList.remove("is-active")},400)},50))}):h.classList.contains("is-prev")&&Array.from(e).reverse().forEach((e,a)=>{getCoords(e).left-getCoords(s).left<=-1&&o&&(t.classList.add("disable-snap"),o=!1,setTimeout(()=>{scrollHorizontally(s,getCoords(e).left-getCoords(t).left+s.scrollLeft),setTimeout(()=>{t.classList.remove("disable-snap"),h.classList.remove("is-active")},400)},50))})}const f=t(".teacher-issuing-sticker__length--block button");if(f){const e=f.parentElement.querySelector("input");f.classList.contains("is-minus")?e.value=Math.max(1,Number(e.value)-1):f.classList.contains("is-plus")&&(e.value=Math.min(Number(e.getAttribute("max")),Number(e.value)+1))}const y=t(".teacher-audiofiles__change-date--target");y?(y.classList.contains("is-active")||(document.querySelectorAll(".teacher-audiofiles__change-date.is-active").forEach(e=>{e.classList.remove("is-active")}),document.querySelectorAll(".teacher-audiofiles__change-date--block.is-active").forEach(e=>{e.classList.remove("is-active")})),y.parentElement.classList.toggle("is-active")):t(".teacher-audiofiles__change-date")||t(".teacher-audiofiles__change-date--block")||(document.querySelectorAll(".teacher-audiofiles__change-date.is-active").forEach(e=>{e.classList.remove("is-active")}),document.querySelectorAll(".teacher-audiofiles__change-date--block.is-active").forEach(e=>{e.classList.remove("is-active")}));const L=t(".teacher-audiofiles__item--edit");if(L){L.classList.toggle("is-active");const e=L.closest(".teacher-audiofiles__item").querySelector(".teacher-audiofiles__item--name");if(e){e.setAttribute("contenteditable",!0),e.focus(),e.addEventListener("blur",(function t(){e.removeAttribute("contenteditable"),L.classList.remove("is-active"),e.removeEventListener("blur",t)}))}}})),document.querySelectorAll(".teacher-issuing-sticker__length--block input").forEach(e=>{e.addEventListener("input",(function(t){Number(e.value)<Number(e.min)?e.value=e.min:Number(e.value)>Number(e.max)&&(e.value=e.max)}))});const pupils=document.querySelectorAll(".eye .eye-element");window.addEventListener("mousemove",e=>{pupils.forEach(t=>{const s=t.parentElement.offsetWidth-t.offsetWidth/2,a=getCoords(t);var o=(e.pageX-a.left)/(window.innerHeight/40),i=(e.pageY-a.top)/(window.innerHeight/40);o>s/4&&(o=s/4),-s/4>o&&(o=-s/4),i>s/3&&(i=s/3),i<-s/4&&(i=-s/4),o+="px",i+="px",t.setAttribute("data-x",o),t.setAttribute("data-y",i),t.style.transform="translate3d("+t.dataset.x+","+t.dataset.y+", 0px)"})});let windowSize=0,accountTableTips=document.querySelectorAll(".account-table__tip"),accountTableTipsArray=[];accountTableTips.forEach((e,t)=>{const s=e.querySelector(".account-table__tip--content"),a=e.querySelector(".account-table__tip--icon");body.append(s),a.addEventListener("pointerenter",(function(e){"desktop"==getDeviceType()&&(a.classList.add("is-active"),s.classList.add("is-active"),setTimeout(()=>{s.classList.add("is-visible")},0))})),a.addEventListener("click",(function(e){"desktop"!=getDeviceType()&&(document.querySelectorAll(".account-table__tip--content.is-active").forEach(e=>{e.classList.remove("is-visible"),setTimeout(()=>{e.classList.remove("is-active")},300)}),document.querySelectorAll(".account-table__tip--icon.is-active").forEach(e=>{e.classList.remove("is-active")}),a.classList.add("is-active"),s.classList.add("is-active"),setTimeout(()=>{s.classList.add("is-visible")},0))})),s.addEventListener("pointerleave",(function(e){"desktop"==getDeviceType()&&(a.classList.remove("is-active"),s.classList.remove("is-visible"),setTimeout(()=>{s.classList.remove("is-active")},300))})),accountTableTipsArray[t]={target:e.querySelector(".account-table__tip--icon"),content:s}});let teacherAudiofilesChangeDateArray=[];function addEvents(){Array.from(teacherAudiofilesChangeDateArray).forEach(e=>{e.target.classList.contains("is-init")||(e.target.classList.add("is-init"),e.target.addEventListener("click",(function(t){setTimeout(()=>{console.log(e.target.parentElement),e.target.parentElement.classList.contains("is-active")?e.block.classList.add("is-active"):e.block.classList.remove("is-active")},0)})))})}function changeDate(){document.querySelectorAll(".teacher-audiofiles__change-date").forEach(e=>{e.querySelector(".teacher-audiofiles__change-date--block")&&(teacherAudiofilesChangeDateArray.push({target:e.querySelector(".teacher-audiofiles__change-date--target"),block:e.querySelector(".teacher-audiofiles__change-date--block")}),body.append(e.querySelector(".teacher-audiofiles__change-date--block")))}),addEvents()}function resize(){header?html.style.setProperty("--height-header",header.offsetHeight+"px"):headerAccount&&html.style.setProperty("--height-header",headerAccount.offsetHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}if(changeDate(),document.querySelector(".teacher-audiofiles")&&setInterval(()=>{document.querySelector(".teacher-audiofiles__change-date")&&Array.from(teacherAudiofilesChangeDateArray).forEach(e=>{let t=getCoords(e.target).left;e.block.style.setProperty("--x",t+e.target.offsetWidth/2+"px"),e.block.style.setProperty("--y",getCoords(e.target).top+"px")})},100),document.querySelector(".account-table__tip")&&setInterval(()=>{Array.from(accountTableTipsArray).forEach(e=>{let t=e.target.getBoundingClientRect().x+e.target.offsetWidth;windowSize>=550?t>windowSize-250?e.content.classList.add("on-left"):e.content.classList.remove("on-left"):t>windowSize-150?e.content.classList.add("on-left"):e.content.classList.remove("on-left"),e.content.style.setProperty("--x",e.target.getBoundingClientRect().x+e.target.offsetWidth+"px"),e.content.style.setProperty("--y",e.target.getBoundingClientRect().y+"px")})},100),resize(),window.addEventListener("resize",resize),document.querySelector(".our-teachers__slider")){new Splide(".our-teachers__slider",{type:"loop",perPage:1,perMove:1,gap:30,easing:"ease",speed:700,pagination:!1,arrows:!0,mediaQuery:"min",breakpoints:{1300:{perPage:4},992:{perPage:3},768:{perPage:2}}}).mount()}if(document.querySelector(".reviews__slider")){const e=new Splide(".reviews__slider",{type:"fade",rewind:!0,perPage:1,easing:"ease",speed:700,arrows:!0,pagination:!1});e.on("inactive",(function(e){e.slide.querySelector(".reviews__video--preview")&&e.slide.querySelector(".reviews__video video")&&(e.slide.querySelector(".reviews__video--preview").classList.remove("_play"),e.slide.querySelector(".reviews__video video").pause(),e.slide.querySelector(".reviews__video video").currentTime=0)})),e.mount()}if(document.querySelector(".reviews__slider-mob")){new Splide(".reviews__slider-mob",{type:"loop",perPage:1,speed:700,easing:"ease",arrows:!1,pagination:!1,gap:20}).mount()}if(document.querySelector(".related-articles__slider")){new Splide(".related-articles__slider",{type:"loop",perPage:3,perMove:1,speed:700,easing:"ease",pagination:!1,gap:30,breakpoints:{992:{perPage:2},550:{perPage:1,gap:20}}}).mount()}function customSelect(){document.querySelectorAll(".custom-select:not(.ss-main)").forEach(e=>{new SlimSelect({select:e,settings:{showSearch:!1}})})}document.querySelector(".student-awards__slider")&&document.querySelectorAll(".student-awards__slider").forEach(e=>{new Splide(e,{autoWidth:!0,gap:6,speed:500,easing:"ease",type:"loop",pagination:!1}).mount()}),document.querySelectorAll(".account-chat__group-popup--slider").forEach(e=>{new Splide(e,{autoWidth:!0,pagination:!1,speed:500,easing:"ease",perMove:1,gap:15,breakpoints:{768:{gap:11}}}).mount()}),document.querySelectorAll(".teacher-lectures__body").forEach(e=>{new Splide(e,{perPage:1,gap:15,pagination:!1,speed:700,perMove:1,easing:"ease",grid:{rows:2,cols:3,gap:{row:"30px",col:"15px"}},breakpoints:{1850:{grid:{rows:2,cols:2,gap:{row:"30px",col:"15px"}}},1600:{grid:{rows:2,cols:1,gap:{row:"30px",col:"15px"}}},1420:{grid:{rows:2,cols:2,gap:{row:"30px",col:"15px"}}},992:{destroy:!0}}}).mount(window.splide.Extensions)}),customSelect();const copyBtn=document.querySelectorAll(".copy-btn");copyBtn.forEach(e=>{new ClipboardJS(e).on("success",(function(t){e.classList.remove("is-copied"),setTimeout(()=>{e.classList.add("is-copied")},0)}))}),document.querySelectorAll(".account-chat__file").forEach(e=>{e.querySelector("input")&&e.querySelector("input").addEventListener("change",(function(t){let s="";Array.from(t.target.files).forEach((e,t)=>{s=0!=t?", "+e.name:e.name}),e.querySelector("span").querySelector("span").textContent=s}))}),document.querySelectorAll(".students-attendance__check-all input").forEach(e=>{e.addEventListener("change",(function(t){document.querySelectorAll(".students-attendance__item input").forEach(t=>{e.checked?t.checked=!0:t.checked=!1})}))});const players=document.querySelectorAll(".student-audio-listening__player audio");players.forEach(e=>{let t=new MediaElementPlayer(e,{hideVolumeOnTouchDevices:!1,startVolume:1});const s=e.closest(".student-audio-listening__player").querySelector(".student-audio-listening__player--play-pause"),a=e.closest(".student-audio-listening__player").querySelector(".student-audio-listening__player--seek.is-prev .student-audio-listening__player--seek-arrow"),o=e.closest(".student-audio-listening__player").querySelector(".student-audio-listening__player--seek.is-next .student-audio-listening__player--seek-arrow");a&&a.addEventListener("click",(function(e){t.setCurrentTime(t.getCurrentTime()-10)})),o&&o.addEventListener("click",(function(e){t.setCurrentTime(t.getCurrentTime()+10)})),s&&(s.addEventListener("click",(function(e){s.classList.contains("is-playing")?t.pause():t.play()})),t.domNode.addEventListener("play",(function(){s.classList.add("is-playing")})),t.domNode.addEventListener("pause",(function(){s.classList.remove("is-playing")})))}),Fancybox.bind("[data-fancybox]",{});