const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),headerAccount=document.querySelector(".header-account"),aside=document.querySelector(".aside"),header=document.querySelector(".header");function Popup(e){let t=document.querySelector("body"),o=document.querySelector("html"),s="object"==typeof e&&!!e.saveID,i=!0,a=!0;const c=function(){let e=window.location.toString();if(e.indexOf("#")>0){let t=e.substring(0,e.indexOf("#"));window.history.replaceState({},document.title,t)}},n=function(e,a){if(i){i=!1;let n=document.querySelector(e);if(!n)return new Error(`Not found "${e}"`);n.classList.contains("popup")&&(n.style.display="flex",t.classList.remove("_popup-active"),o.style.setProperty("--popup-padding",window.innerWidth-t.offsetWidth+"px"),t.classList.add("_popup-active"),c(),s&&history.pushState("","",e),setTimeout(()=>{if(a)n.classList.add("_transition-none"),n.classList.add("_active"),i=!0;else{n.classList.add("_active"),n.addEventListener("transitionend",(function e(){i=!0,n.removeEventListener("transitionend",e)}))}},0))}},r=function(e){if(a){let i;a=!1,i="string"==typeof e?document.querySelector(e):e.closest(".popup"),i.classList.contains("_transition-none")&&i.classList.remove("_transition-none"),setTimeout(()=>{i.classList.remove("_active"),i.addEventListener("transitionend",(function e(){const n=document.querySelectorAll(".popup._active");n.length<1&&(t.classList.remove("_popup-active"),o.style.setProperty("--popup-padding","0px")),s&&(c(),n[n.length-1]&&history.pushState("","","#"+n[n.length-1].getAttribute("id"))),a=!0,i.style.display="none",i.removeEventListener("transitionend",e)}))},0)}};return{open:function(e){n(e)},close:function(e){r(e)},init:function(){let e;if(t.addEventListener("click",(function(t){e=t.target;let o=e.closest(".open-popup");o&&(t.preventDefault(),n(o.getAttribute("href")));let s=e.closest(".popup-close");s&&r(s)})),t.addEventListener("keyup",(function(e){27==e.code&&document.querySelector(".popup._active")&&r(document.querySelector(".popup._active"))})),s){let e=new URL(window.location);e.hash&&n(e.hash,!0)}}}}const popup=new Popup({saveID:!0});popup.init();const getDeviceType=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};function getCoords(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset,left:t.left+window.pageXOffset}}const imageAspectRatio=document.querySelectorAll(".image-aspect-ratio, figure");imageAspectRatio.forEach(e=>{const t=e.querySelector("img"),o=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==o.position&&e.style.setProperty("--padding-aspect-ratio",Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")});const accountChatMain=document.querySelector(".account-chat__main"),accountChatAside=document.querySelector(".account-chat__aside");function scrollHorizontally(e,t){var o=null,s=e.scrollLeft,i=t;requestAnimationFrame((function t(a){o||(o=a);var c=(a-o)/400,n=c<.5?4*c*c*c:(c-1)*(2*c-2)*(2*c-2)+1;e.scrollLeft=s+(i-s)*n,c<1&&requestAnimationFrame(t)}))}body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}t(".header__burger")&&menu.forEach(e=>{e.classList.toggle("_mob-menu-active")});const o=t(".header__lang--target");o&&"desktop"!=getDeviceType()?o.classList.toggle("is-active"):!t(".header__lang")&&document.querySelector(".header__lang--target.is-active")&&document.querySelector(".header__lang--target.is-active").classList.remove("is-active");const s=t(".header-account__lang--target");s&&"desktop"!=getDeviceType()?s.classList.toggle("is-active"):!t(".header-account__lang")&&document.querySelector(".header-account__lang--target.is-active")&&document.querySelector(".header-account__lang--target.is-active").classList.remove("is-active");const i=t(".header__tel--target");i&&"desktop"!=getDeviceType()?i.classList.toggle("is-active"):!t(".header__tel")&&document.querySelector(".header__tel--target.is-active")&&document.querySelector(".header__tel--target.is-active").classList.remove("is-active");const a=t(".header__nav--list a");a&&-1!=a.getAttribute("href").indexOf("#")&&document.querySelector("#"+a.getAttribute("href").split("#").pop())&&(e.preventDefault(),document.querySelector("#"+a.getAttribute("href").split("#").pop()).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),history.pushState("","","#"+a.getAttribute("href").split("#").pop()));const c=t(".reviews__video--preview");c&&(c.classList.add("_play"),c.parentElement.querySelector("video").play());const n=t(".faq__target");n&&(n.closest(".faq__list").querySelector(".faq__target._active")&&(n.classList.contains("_active")||n.closest(".faq__list").querySelector(".faq__target._active").classList.remove("_active")),n.classList.toggle("_active"));let r=t(".scroll-to");if(r){let t;e.preventDefault(),t=document.querySelector(r.getAttribute("href")),menu.forEach(e=>{e.classList.remove("_mob-menu-active")}),t?t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):body.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}const l=t(".header-account__notification--target");l?l.classList.add("is-active"):!t(".header-account__notification")&&document.querySelector(".header-account__notification--target.is-active")&&document.querySelector(".header-account__notification--target.is-active").classList.remove("is-active");const d=t(".header-account__profile--target");d?d.classList.add("is-active"):!t(".header-account__profile")&&document.querySelector(".header-account__profile--target.is-active")&&document.querySelector(".header-account__profile--target.is-active").classList.remove("is-active");t(".header-account__open-aside--btn")&&aside.classList.add("is-active");t(".aside__close")&&aside.classList.remove("is-active");const u=t(".account-block__accordion-target");u&&u.classList.toggle("is-active");const p=t(".account-chat__aside-item");if(p&&accountChatMain){e.preventDefault();const t=p.closest("ul").querySelector(".is-active");t&&t.classList.remove("is-active"),p.classList.add("is-active"),windowSize>=1300?(accountChatMain.classList.remove("fade-in"),accountChatMain.classList.add("fade-out"),setTimeout(()=>{accountChatMain.classList.remove("fade-out"),accountChatMain.classList.add("fade-in")},500)):(accountChatAside.classList.add("is-loading"),setTimeout(()=>{accountChatAside.classList.add("fade-out"),setTimeout(()=>{accountChatAside.style.display="none",accountChatAside.classList.remove("fade-out")},300),accountChatMain.classList.remove("fade-out"),accountChatMain.classList.add("fade-in"),accountChatAside.classList.remove("is-loading"),window.scrollTo({left:0,top:getCoords(accountChatMain).top-30,behavior:"smooth"})},300))}if(t(".account-chat__forward")&&accountChatMain){e.preventDefault();const t=document.querySelector(".account-chat__aside-item.is-active");t&&t.classList.remove("is-active"),accountChatMain.classList.add("fade-out"),accountChatMain.classList.remove("fade-in"),setTimeout(()=>{accountChatAside.style.removeProperty("display"),accountChatAside.classList.add("fade-in")},300)}const g=t(".account-table-controls__arrow");if(g&&!g.classList.contains("is-active")){g.classList.add("is-active");const e=g.closest(".account-table-wrapper"),t=e.querySelector(".account-table-container"),o=e.querySelector("tbody tr").querySelectorAll("td");let s=!1,i=!1;g.classList.contains("is-next")?o.forEach((o,i)=>{getCoords(o).left-getCoords(e).left-1>1&&!s&&(s=!0,t.classList.add("disable-snap"),setTimeout(()=>{scrollHorizontally(t,getCoords(o).left-getCoords(e).left+t.scrollLeft)},0),setTimeout(()=>{t.classList.remove("disable-snap")},400))}):g.classList.contains("is-prev")&&Array.from(o).reverse().forEach((o,s)=>{getCoords(o).left-getCoords(e).left-2<=-10&&!i&&(i=!0,t.classList.add("disable-snap"),setTimeout(()=>{scrollHorizontally(t,getCoords(o).left-getCoords(e).left+t.scrollLeft)},0),setTimeout(()=>{t.classList.remove("disable-snap")},400))}),setTimeout(()=>{g.classList.remove("is-active")},400)}const _=t(".account-chat__group-members--link");if(_){const e=_.closest(".account-chat__group-members").querySelector(".account-chat__group-popup");console.log(_.closest(".account-chat__group-members").querySelector(".account-chat__group-popup")),e&&(e.classList.remove("fade-out"),e.classList.add("is-active"),e.classList.add("fade-in"))}const v=t(".account-chat__group-popup--close");if(v){const e=v.closest(".account-chat__group-popup");e.classList.remove("fade-in"),e.classList.add("fade-out"),setTimeout(()=>{e.classList.remove("is-active")},300)}else t(".account-chat__group-popup")||_||document.querySelectorAll(".account-chat__group-popup").forEach(e=>{e.classList.remove("fade-in"),e.classList.add("fade-out"),setTimeout(()=>{e.classList.remove("is-active")},300)});t(".account-table__tip--content")||t(".account-table__tip--icon")||(document.querySelectorAll(".account-table__tip--content.is-active").forEach(e=>{e.classList.remove("is-visible"),setTimeout(()=>{e.classList.remove("is-active")},300)}),document.querySelectorAll(".account-table__tip--icon.is-active").forEach(e=>{e.classList.remove("is-active")}));const m=t(".student-audio-listening__target");m&&m.classList.toggle("is-active")}));const pupils=document.querySelectorAll(".eye .eye-element");window.addEventListener("mousemove",e=>{pupils.forEach(t=>{const o=t.parentElement.offsetWidth-t.offsetWidth/2,s=getCoords(t);var i=(e.pageX-s.left)/(window.innerHeight/40),a=(e.pageY-s.top)/(window.innerHeight/40);i>o/4&&(i=o/4),-o/4>i&&(i=-o/4),a>o/3&&(a=o/3),a<-o/4&&(a=-o/4),i+="px",a+="px",t.setAttribute("data-x",i),t.setAttribute("data-y",a),t.style.transform="translate3d("+t.dataset.x+","+t.dataset.y+", 0px)"})});let windowSize=0;const accountTableTips=document.querySelectorAll(".account-table__tip"),accountTableTipsArray=[];function resize(){header?html.style.setProperty("--height-header",header.offsetHeight+"px"):headerAccount&&html.style.setProperty("--height-header",headerAccount.offsetHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}if(accountTableTips.forEach((e,t)=>{const o=e.querySelector(".account-table__tip--content"),s=e.querySelector(".account-table__tip--icon");body.append(o),s.addEventListener("pointerenter",(function(e){"desktop"==getDeviceType()&&(s.classList.add("is-active"),o.classList.add("is-active"),setTimeout(()=>{o.classList.add("is-visible")},0))})),s.addEventListener("click",(function(e){"desktop"!=getDeviceType()&&(document.querySelectorAll(".account-table__tip--content.is-active").forEach(e=>{e.classList.remove("is-visible"),setTimeout(()=>{e.classList.remove("is-active")},300)}),document.querySelectorAll(".account-table__tip--icon.is-active").forEach(e=>{e.classList.remove("is-active")}),s.classList.add("is-active"),o.classList.add("is-active"),setTimeout(()=>{o.classList.add("is-visible")},0))})),o.addEventListener("pointerleave",(function(e){"desktop"==getDeviceType()&&(s.classList.remove("is-active"),o.classList.remove("is-visible"),setTimeout(()=>{o.classList.remove("is-active")},300))})),accountTableTipsArray[t]={target:e.querySelector(".account-table__tip--icon"),content:o}}),document.querySelector(".account-table__tip")&&setInterval(()=>{Array.from(accountTableTipsArray).forEach(e=>{let t=e.target.getBoundingClientRect().x+e.target.offsetWidth;windowSize>=550?t>windowSize-250?e.content.classList.add("on-left"):e.content.classList.remove("on-left"):t>windowSize-150?e.content.classList.add("on-left"):e.content.classList.remove("on-left"),e.content.style.setProperty("--x",e.target.getBoundingClientRect().x+e.target.offsetWidth+"px"),e.content.style.setProperty("--y",e.target.getBoundingClientRect().y+"px")})},100),resize(),window.addEventListener("resize",resize),document.querySelector(".our-teachers__slider")){new Splide(".our-teachers__slider",{type:"loop",perPage:1,perMove:1,gap:30,easing:"ease",speed:700,pagination:!1,arrows:!0,mediaQuery:"min",breakpoints:{1300:{perPage:4},992:{perPage:3},768:{perPage:2}}}).mount()}if(document.querySelector(".reviews__slider")){const e=new Splide(".reviews__slider",{type:"fade",rewind:!0,perPage:1,easing:"ease",speed:700,arrows:!0,pagination:!1});e.on("inactive",(function(e){e.slide.querySelector(".reviews__video--preview")&&e.slide.querySelector(".reviews__video video")&&(e.slide.querySelector(".reviews__video--preview").classList.remove("_play"),e.slide.querySelector(".reviews__video video").pause(),e.slide.querySelector(".reviews__video video").currentTime=0)})),e.mount()}if(document.querySelector(".reviews__slider-mob")){new Splide(".reviews__slider-mob",{type:"loop",perPage:1,speed:700,easing:"ease",arrows:!1,pagination:!1,gap:20}).mount()}if(document.querySelector(".related-articles__slider")){new Splide(".related-articles__slider",{type:"loop",perPage:3,perMove:1,speed:700,easing:"ease",pagination:!1,gap:30,breakpoints:{992:{perPage:2},550:{perPage:1,gap:20}}}).mount()}document.querySelector(".student-awards__slider")&&document.querySelectorAll(".student-awards__slider").forEach(e=>{new Splide(e,{autoWidth:!0,gap:6,speed:500,easing:"ease",type:"loop",pagination:!1}).mount()}),document.querySelectorAll(".account-chat__group-popup--slider").forEach(e=>{new Splide(e,{autoWidth:!0,pagination:!1,speed:500,easing:"ease",perMove:1,gap:15,breakpoints:{768:{gap:11}}}).mount()}),document.querySelectorAll(".teacher-lectures__body").forEach(e=>{new Splide(e,{perPage:1,gap:15,pagination:!1,speed:700,perMove:1,easing:"ease",grid:{rows:2,cols:3,gap:{row:"30px",col:"15px"}},breakpoints:{1850:{grid:{rows:2,cols:2,gap:{row:"30px",col:"15px"}}},1600:{grid:{rows:2,cols:1,gap:{row:"30px",col:"15px"}}},1420:{grid:{rows:2,cols:2,gap:{row:"30px",col:"15px"}}},992:{destroy:!0}}}).mount(window.splide.Extensions)}),document.querySelectorAll(".custom-select").forEach(e=>{new SlimSelect({select:e,settings:{showSearch:!1}})});const copyBtn=document.querySelectorAll(".copy-btn");copyBtn.forEach(e=>{new ClipboardJS(e).on("success",(function(t){e.classList.remove("is-copied"),setTimeout(()=>{e.classList.add("is-copied")},0)}))}),document.querySelectorAll(".account-chat__file").forEach(e=>{e.querySelector("input")&&e.querySelector("input").addEventListener("change",(function(t){let o="";Array.from(t.target.files).forEach((e,t)=>{o=0!=t?", "+e.name:e.name}),e.querySelector("span").querySelector("span").textContent=o}))});const players=document.querySelectorAll(".student-audio-listening__player audio");players.forEach(e=>{let t=new MediaElementPlayer(e,{hideVolumeOnTouchDevices:!1,startVolume:1});const o=e.closest(".student-audio-listening__player").querySelector(".student-audio-listening__player--play-pause"),s=e.closest(".student-audio-listening__player").querySelector(".student-audio-listening__player--seek.is-prev .student-audio-listening__player--seek-arrow"),i=e.closest(".student-audio-listening__player").querySelector(".student-audio-listening__player--seek.is-next .student-audio-listening__player--seek-arrow");s&&s.addEventListener("click",(function(e){t.setCurrentTime(t.getCurrentTime()-10)})),i&&i.addEventListener("click",(function(e){t.setCurrentTime(t.getCurrentTime()+10)})),o&&(o.addEventListener("click",(function(e){o.classList.contains("is-playing")?t.pause():t.play()})),t.domNode.addEventListener("play",(function(){o.classList.add("is-playing")})),t.domNode.addEventListener("pause",(function(){o.classList.remove("is-playing")})))});